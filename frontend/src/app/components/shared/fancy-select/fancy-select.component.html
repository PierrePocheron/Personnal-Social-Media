<div class="relative w-full">
    <button type="button" class="fancy-select-btn" (click)="toggleDropdown()" [disabled]="disabled">
      {{ selectedLabel }}
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-4 h-4 ml-auto transition-transform"
      [class.rotate-180]="dropdownOpen"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

    <div *ngIf="dropdownOpen" class="absolute z-50 w-full mt-1 bg-white border shadow-2xl rounded-xl animate-fade-in">
        <input [(ngModel)]="search" (keydown)="handleKeydown($event)" placeholder="Rechercher..." class="w-full px-3 py-2 text-sm border-b focus:outline-none" />

        <div class="overflow-y-auto max-h-48">
            <button *ngFor="let opt of filteredOptions; let i = index" (click)="select(opt.value)" [class.bg-indigo-100]="highlightedIndex === i" class="block w-full px-4 py-2 text-sm text-left hover:bg-indigo-50">
        {{ opt.label }}
        <span *ngIf="opt.subtitle" class="text-gray-400">({{ opt.subtitle }})</span>
      </button>
        </div>
    </div>
</div>